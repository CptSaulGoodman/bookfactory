<div class="timeline-item-completed">
    <h3>1. Your Story Idea</h3>
    <p>"{{ book.user_prompt }}"</p>
</div>
<div class="timeline-item-completed">
    <h3>2. Title</h3>
    <p>"{{ book.title }}"</p>
    <p class="ai-comment">ðŸ¤– {{ title_ai_comment }}</p>
</div>
<div class="timeline-item-completed">
    <h3>3. World Setting</h3>
    <p>"{{ book.world_description }}"</p>
    <p class="ai-comment">ðŸ¤– {{ world_ai_comment }}</p>
</div>
<h3>Character Creation</h3>
<p>Add the characters for your story. Who is the protagonist? Who are the villains and allies?</p>

<form id="characters-form" hx-put="/book/{{ book.id }}/characters" hx-target="body" hx-indicator=".spinner">
    
    <div id="character-forms-container">
        <!-- The first character form is loaded automatically -->
        <div hx-get="/book/{{ book.id }}/characters/add?character_index=0" hx-trigger="load" hx-swap="outerHTML"></div>
    </div>
    
    <button type="button"
            _="on click
                get the previous <div/> in me
                set my @hx-get to '/book/{{ book.id }}/characters/add?character_index=' + ( a newfound
                .character-form's length )
              end"
            hx-get="/book/{{ book.id }}/characters/add?character_index=1"
            hx-target="#character-forms-container"
            hx-swap="beforeend"
            class="secondary">
        + Add Character
    </button>
    
    <button type="submit">Finish and Generate My Book!</button>

</form>